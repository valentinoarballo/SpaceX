---
import Button from "./Button.astro";
import Logo from "./Logo.astro";


import { getRockets } from "../services/spacexv4";
const rocketDocs = await getRockets();

---

<header
  id="landing-header"
  class="py-3 md:px-10 px-0 flex items-center fixed top-0 w-full 
  justify-between z-40"
>
  <a href="/" class="flex flex-grow basis-0 ">
    <Logo />
  </a>

  <nav>
    <ul
      class="[&>li>a]:transition-colors [&>li>a]:duration-1000 flex text-lg
      [&>li>a]:text-current [&>li>a]:inline-block 
      [&>li>a]:px-4 [&>li>a]:py-2"
    >
      {
        rocketDocs.map(({ name }) => (
          
        <li><a href={`/rocket/${name}`}>{name}</a></li>

        ))
      }
      <li><a href="/allLaunches">All Launches</a></li>

    </ul>
  </nav>

  <nav 
    class="hidden sm:[ul>li]:margin-0 lg:flex flex-grow justify-end basis-0">
    <ul
      class="[&>li>a]:transition-colors [&>li>a]:duration-1000 flex text-lg 
      [&>li>a]:text-current [&>li>a]:inline-block 
      [&>li>a]:px-4 [&>li>a]:py-2"
    >
      <li><a href="/">Men√∫</a></li>
    </ul>
  </nav>

  <div
    id="menu-backdrop"
    class="absolute bg-white/10 backdrop-blur-xl rounded
  left-[var(--left)] top-[var(--top)]
  w-[var(--width)] h-[var(--height)]
  transition-all duration-300
  ease-in-out opacity-0 -z-10"
  >
  </div>
</header>

<script>
  const listItem = document.querySelectorAll("#landing-header li");
  const menuBackdrop = document.querySelector("#menu-backdrop") as HTMLElement;

  listItem.forEach((item) => {
    item.addEventListener("mouseenter", () => {
      const { left, top, width, height } = item.getBoundingClientRect();

      menuBackdrop.style.setProperty("--left", `${left}px`);
      menuBackdrop.style.setProperty("--top", `${top}px`);
      menuBackdrop.style.setProperty("--width", `${width}px`);
      menuBackdrop.style.setProperty("--height", `${height}px`);

      menuBackdrop.style.opacity = "1";
      menuBackdrop.style.visibility = "visible";
    });

    item.addEventListener("mouseleave", () => {
      menuBackdrop.style.opacity = "0";
      menuBackdrop.style.visibility = "hidden";
    });
  });
</script>

